
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title> | 天机工程</title>
    <meta name="author" content="bigbigbigwaterbucket" />
    <meta name="description" content="科技不是一题一解的死板学识，而是令我们超凡脱俗的产物。" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="icon" href="/images/avatar.jpg" />
    <link rel="preconnect" href="https://cdn.staticfile.org" />
<script src="https://cdn.staticfile.org/vue/3.3.4/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css" />
<link rel="preconnect" href="https://fonts.loli.net" />
<link rel="preconnect" href="https://gstatic.loli.net" crossorigin />
<link rel="stylesheet" href="https://fonts.loli.net/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap" />
<script> const mixins = {}; </script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<script src="https://cdn.staticfile.org/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.org/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://cdn.staticfile.org/highlight.js/11.8.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>天机工程</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;天机工程</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1></h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/11/7
        </span>
        
        
    </div>
    
    <div class="content" v-pre>
        <h1 id="爬虫授课：web网络请求、抓包"><a href="#爬虫授课：web网络请求、抓包" class="headerlink" title="爬虫授课：web网络请求、抓包"></a>爬虫授课：web网络请求、抓包</h1><p>计算机网络是指两台或更多的计算机组成的网络，在同一个网络中，任意两台计算机都可以直接通信，因为所有计算机都需要遵循同一种网络协议。</p>
<span id="more"></span>

<p>那什么是互联网呢？互联网是网络的网络（internet），即把很多计算机网络连接起来，形成一个全球统一的互联网。</p>
<p>对某个特定的计算机网络来说，它可能使用网络协议ABC，而另一个计算机网络可能使用网络协议XYZ。如果计算机网络各自的通讯协议不统一，就没法把不同的网络连接起来形成互联网。因此，为了把计算机网络接入互联网，就必须使用TCP&#x2F;IP协议。</p>
<p>TCP&#x2F;IP协议泛指互联网协议，其中最重要的两个协议是TCP协议和IP协议。只有使用TCP&#x2F;IP协议的计算机才能够联入互联网，使用其他网络协议（例如NetBIOS、AppleTalk协议等）是无法联入互联网的。</p>
<h3 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h3><p>在互联网中，一个IP地址用于唯一标识一个网络接口（Network Interface）。一台联入互联网的计算机肯定有一个IP地址，但也可能有多个IP地址。IP地址分为IPv4和IPv6两种。IPv4采用32位地址，类似<code>101.202.99.12</code>，而IPv6采用128位地址，类似<code>2001:0DA8:100A:0000:0000:1020:F2F3:1428</code>。</p>
<p><strong>例如，百度的首页的网络接口ip地址为：14.215.177.39，大家可以尝试直接通过ip地址来访问百度的首页</strong></p>
<h3 id="域名-网址-url"><a href="#域名-网址-url" class="headerlink" title="域名&#x2F;网址&#x2F;url"></a>域名&#x2F;网址&#x2F;url</h3><p>因为直接记忆IP地址非常困难，如果每次都用ip地址来访问百度首页会很麻烦，所以我们通常使用域名访问某个特定的服务。百度的首页域名大家都知道: <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<p>**为什么可以通过域名访问呢？有个域名解析服务器DNS专门负责把域名(<a target="_blank" rel="noopener" href="http://www.baidu.com)翻译成对应的ip(14.215.177.39)**,客户端再根据ip地址访问服务器./">www.baidu.com)翻译成对应的IP(14.215.177.39)**，客户端再根据IP地址访问服务器。</a></p>
<p>有一个特殊的本机域名<code>localhost</code>，它对应的IP地址总是本机地址<code>127.0.0.1</code>。</p>
<h3 id="常用协议"><a href="#常用协议" class="headerlink" title="常用协议"></a>常用协议</h3><p>IP协议是一个分组交换，它不保证可靠传输。而TCP协议是传输控制协议，它是面向连接的协议，支持可靠传输和双向通信。TCP协议是建立在IP协议之上的</p>
<p>区别:简单地说，IP协议只负责发数据包，不保证顺序和正确性，而TCP协议负责控制数据包传输，它在传输数据之前需要先建立连接，建立连接后才能传输数据，传输完后还需要断开连接。TCP协议之所以能保证数据的可靠传输，是通过接收确认、超时重传这些机制实现的。并且，TCP协议允许双向通信，即通信双方可以同时发送和接收数据。</p>
<p>TCP协议也是应用最广泛的协议，许多高级协议都是建立在TCP协议之上的，例如<strong>HTTP</strong>、SMTP等。</p>
<h2 id="———————————————————————————————————"><a href="#———————————————————————————————————" class="headerlink" title="———————————————————————————————————-"></a>———————————————————————————————————-</h2><h3 id="从这里开始，会先把web网络请求的理论内容先过一遍-会比较枯燥-，然后再带大家实操一下"><a href="#从这里开始，会先把web网络请求的理论内容先过一遍-会比较枯燥-，然后再带大家实操一下" class="headerlink" title="从这里开始，会先把web网络请求的理论内容先过一遍(会比较枯燥)，然后再带大家实操一下"></a>从这里开始，会先把web网络请求的理论内容先过一遍(会比较枯燥)，然后再带大家实操一下</h3><h3 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h3><p>什么是HTTP？HTTP就是目前使用最广泛的Web应用程序使用的基础协议，例如，浏览器访问网站，手机App访问后台服务器，都是通过HTTP协议实现的。</p>
<p>HTTP是HyperText Transfer Protocol的缩写，翻译为超文本传输协议，它是基于TCP协议之上的一种<strong>请求-响应</strong>协议。</p>
<p>我们来看一下浏览器请求访问某个网站时发送的HTTP请求-响应。当浏览器希望访问某个网站时，浏览器和网站服务器之间首先建立TCP连接，然后，浏览器向服务器发送一个HTTP请求，服务器收到后，返回一个HTTP响应，并且在响应中包含了HTML的网页内容，这样，浏览器解析HTML后就可以给用户显示网页了。一个完整的HTTP请求-响应如下：</p>
<pre><code class="ascii">            GET / HTTP/1.1
            Host: www.sina.com.cn
            User-Agent: Mozilla/5 MSIE
            Accept: */*                ┌────────┐
┌─────────┐ Accept-Language: zh-CN,en  │░░░░░░░░│
│O ░░░░░░░│───────────────────────────&gt;├────────┤
├─────────┤&lt;───────────────────────────│░░░░░░░░│
│         │ HTTP/1.1 200 OK            ├────────┤
│         │ Content-Type: text/html    │░░░░░░░░│
└─────────┘ Content-Length: 133251     └────────┘
  Browser   &lt;!DOCTYPE html&gt;              Server
            &lt;html&gt;&lt;body&gt;
            &lt;h1&gt;Hello&lt;/h1&gt;
            ...
</code></pre>
<p><strong>HTTP请求的格式是固定的，它由 1、请求头(HTTP Header)和2、请求体(HTTP Body)两部分构成</strong></p>
<p>请求头会标注出<code>请求方法 路径 HTTP版本</code>，例如，<code>GET / HTTP/1.1</code>表示使用<code>GET</code>请求，路径是<code>/</code>，版本是<code>HTTP/1.1</code>。</p>
<p>请求头是按键值对的格式阻滞信息的，即<code>Header: Value</code>格式，我们称为HTTP Header，服务器依靠某些特定的Header来识别客户端请求，例如：</p>
<ul>
<li>Host：表示请求的域名，因为一台服务器上可能有多个网站，因此有必要依靠Host来识别请求是发给哪个网站的；</li>
<li>User-Agent：表示客户端自身标识信息，不同的浏览器有不同的标识，服务器依靠User-Agent判断客户端类型是IE还是Chrome，是Firefox还是一个Python爬虫；</li>
<li>Accept：表示客户端能处理的HTTP响应格式，<code>*/*</code>表示任意格式，<code>text/*</code>表示任意文本，<code>image/png</code>表示PNG格式的图片；</li>
<li>Accept-Language：表示客户端接收的语言，多种语言按优先级排序，服务器依靠该字段给用户返回特定语言的网页版本。</li>
</ul>
<p><strong>HTTP响应也是由响应头(Header)和响应体(Body)两部分组成</strong></p>
<p>响应头会标注出<code>HTTP版本 响应代码 响应说明</code>，例如，<code>HTTP/1.1 200 OK</code>表示版本是<code>HTTP/1.1</code>，响应代码是<code>200</code>，响应说明是<code>OK</code>。客户端只依赖响应代码判断HTTP响应是否成功。HTTP有固定的响应代码：</p>
<ul>
<li>1xx：表示一个提示性响应，例如101表示将切换协议，常见于WebSocket连接；</li>
<li>2xx：表示一个成功的响应，例如200表示成功，206表示只发送了部分内容；</li>
<li>3xx：表示一个重定向的响应，例如301表示永久重定向，303表示客户端应该按指定路径重新发送请求；</li>
<li>4xx：表示一个因为客户端问题导致的错误响应，例如400表示因为Content-Type等各种原因导致的无效请求，404表示指定的路径不存在；</li>
<li>5xx：表示一个因为服务器问题导致的错误响应，例如500表示服务器内部故障，503表示服务器暂时无法响应。</li>
</ul>
<h3 id="GET和POST请求"><a href="#GET和POST请求" class="headerlink" title="GET和POST请求"></a>GET和POST请求</h3><p>HTTP请求有很多种方式，但是HTTP响应却都一样，这里介绍两种常见的HTTP请求方法，也是爬虫最常用的：GET和POST</p>
<p>我们之前说过，HTTP请求包括请求头和请求体，<strong>GET和POST请求最大区别在于：GET请求的请求体必须反映在 域名(即url)中，而POST请求不需要</strong></p>
<p><strong>例如，如果你想登录校园网，那么你肯定得输入账号和密码；如果校园网靠GET请求登录，那么GET请求会把账号和密码明文组织在校园网url的?后面；而如果靠POST，则你在url中看不到账号和密码，相对来说，POST请求“稍微”安全一些</strong></p>
<h3 id="HTML、CSS与JavaScript简介-以及json格式文件"><a href="#HTML、CSS与JavaScript简介-以及json格式文件" class="headerlink" title="HTML、CSS与JavaScript简介 以及json格式文件"></a>HTML、CSS与JavaScript简介 以及json格式文件</h3><p>通过HTTP协议，我们可以得到远程服务器发送给我们的内容，这些内容一般称为“前端”内容，<strong>我们爬虫主要获得的信息就来源于服务器返回给我们的前端内容(bilibili页面呈现)，后端私密内容(bilibili所有账户、密码，还有大会员信息等)较难获得且很大概率违法。</strong></p>
<p>HTML、CSS和JavaScript就是浏览器主要发送给我们的“前端”内容。</p>
<p>HTML:超文本标记语言，<strong>浏览器通过返回的HTML语言组织并呈现出页面，！！！！并且根据HTML语言进一步发出更多资源请求，比如别人在HTML语言中插入一个&lt;img&gt;标签，并在标签中给出了对应图片资源的url，那么浏览器会“自动”根据这个url“自动”再发一次请求，去请求这张图片的资源！！！！</strong></p>
<p>CSS：浏览器通过CSS渲染页面，主要起美化作用</p>
<p>JavaScript:脚本语言，和Python其实是同一类，你可以把<strong>浏览器内核视作JavaScript的解释器，主要作用有提高安全性，实现复杂的功能并动态呈现页面</strong></p>
<p>json:也是一种键值对形式的数据，例如 {“xiaoming”:”24”}，注意它可以迭代，值可能是另一个键值对</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>前面讲了一大堆概念，可能会有些绕，现在来总结下HTTP通信的一个基本过程</p>
<p><strong>你在浏览器键入url后，DNS将其解析为ip地址，浏览器通过ip地址访问到远程服务器，远程服务器根据请求头(记录GET&#x2F;POST请求类型、允许接收的语言类型…)和请求体(可能是你的登录账号和密码)，返回响应体和响应体(HTML内容)，浏览器再根据响应头和响应体呈现页面，并同时发出更多的资源请求(CSS、JS、请求图片、视频链接等)，然后再把请求到的资源渲染呈现，最终得到我们“看到”的页面</strong></p>
<p>即：</p>
<p><strong>域名解析 —&gt; 与服务器建立连接 —&gt; 发起HTTP请求 —&gt; 服务器响应HTTP请求，浏览器得到html代码 —&gt; 浏览器解析html代码，并请求html代码中的资源（如js、css、图片） —&gt; 浏览器对页面进行渲染呈现给用户</strong></p>
<p>实际上url不仅仅是自己键入的，你点击视频链接、点击“登录”按钮，都相当于发送一次url</p>
<h1 id="实操讲解"><a href="#实操讲解" class="headerlink" title="实操讲解"></a>实操讲解</h1><img title="" src="./assets/2023-11-07-22-48-51-image.png" alt="" width="959">

    </div>
    
    
    
    
    <div id="comment">
        <div id="giscus-container" class="giscus"></div>
    </div>
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2023 天机工程
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;bigbigbigwaterbucket
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    
<script
    src="https://giscus.app/client.js"
    data-repo="bigbigbigwaterbucket/bigbigbigwaterbucket.github.io"
    data-repo-id="R_kgDOKFcnSw"
    data-category="Announcements"
    data-category-id="DIC_kwDOKFcnS84CaIBo"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="https://static-argvchs.netlify.app/css/giscus.css"
    data-lang="zh-CN"
    crossorigin
    async
></script>





    
</body>
</html>
